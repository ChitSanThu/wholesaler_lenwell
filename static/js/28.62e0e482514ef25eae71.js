webpackJsonp([28],{"4hk2":function(t,a){},xovE:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={data:function(){return{id:"",lang:this.$i18n.locale,subscribe:!1,dialogTableVisible:!1,defaultAddress:"",addressList:"",isSubmit:!1,detail:[],formData:{goods:[],addr_id:"",subscription_msg:"2",form_token:"",remark:""},goodsList:[],payType:"",totalGoodsPrice:0,totalPostAgePrice:0,totalTaxationPrice:0,totalOrderPrice:0,addCart:!1,creditcardList:[{id:"paypal",username:"Paypal payment",cart_num:""}],orderPayTitle:"Paypal payment",cartformData:{cart_num:"",username:"",effective_year:"",effective_mouth:"",is_default:2},mouthList:["01","02","03","04","05","06","07","08","09","10","11","12"],yearList:["10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99"]}},created:function(){var t=this.$route.query;this.formData.goods=JSON.parse(decodeURI(t.id)),this.getTrueOrderInfo(),this.getAddressList(),this.getformtoken(),this.getCreditcardList()},methods:{goHome:function(){this.$router.push("/")},getTrueOrderInfo:function(){var t=this;t.$request.GoodsGetOrderTrueInfo({goods:t.formData.goods}).then(function(a){if(1==a.code){if(void 0==a.data.goods||null==a.data.goods||""==a.data.goods)return t.$message.error("There are no goods to pay. Please select the goods first"),void(t.isSubmit=!0);t.goodsList=a.data.goods,t.detail=a.data,t.totalGoodsPrice=a.data.payprice,t.totalPostAgePrice=a.data.totalPostAge,t.totalTaxationPrice=a.data.taxationPrice,t.totalOrderPrice=Number(t.totalGoodsPrice)+Number(t.totalPostAgePrice)+Number(t.totalTaxationPrice)}else t.$message.error(a.msg)})},getAddressList:function(){var t=this;t.$request.getAddressList().then(function(a){if(1==a.code){for(var e in a.data)1==a.data[e].is_default&&(t.defaultAddress=a.data[e],t.formData.addr_id=a.data[e].id);t.addressList=a.data}})},getformtoken:function(t){var a=this;a.$request.getformtoken().then(function(t){a.formData.form_token=t.data.token})},checkedMsg:function(t){this.formData.subscription_msg=!0===t?1:2},bindChangeAddr:function(){this.dialogTableVisible=!0,this.dialogTableType="address"},bindChangePayType:function(){this.dialogTableVisible=!0,this.dialogTableType="paytype"},bindCheckedAddr:function(t,a){this.formData.addr_id=t,this.defaultAddress=this.addressList[a],this.dialogTableVisible=!1},bindSubmit:function(){var t=this;t.isSubmit||(""!=t.formData.addr_id?""!=t.formData.pay_type?(t.isSubmit=!0,t.$request.createGoodsOrder(t.formData).then(function(a){t.isSubmit=!1,1==a.code?"paypal"==a.data.type&&(window.location.href=a.data.data):t.formData.form_token=a.data.token})):t.$message.error("请选择支付方式"):t.$message.error("请选择送货地址"))},addUserAddress:function(){this.dialogTableVisible=!1,this.$router.push("/user/address/info")},addCreditCardBtnFun:function(){this.isCartSubmit=!1,this.addCart=!0,this.cartformData.cart_num="",this.cartformData.username="",this.cartformData.effective_year="",this.cartformData.effective_mouth=""},selectPaypalType:function(t){for(var a in this.creditcardList)if(this.creditcardList[a].id==t){this.orderPayTitle=this.creditcardList[a].cart_num+" "+this.creditcardList[a].username,this.formData.pay_type=this.creditcardList[a].id;break}this.dialogTableVisible=!1,this.dialogTableType=""},getCreditcardList:function(){var t=this;t.$request.getCreditCardList({}).then(function(a){if(1==a.code&&a.data.length>0)for(var e in a.data)t.creditcardList.push(a.data[e]),1==a.data[e].is_default&&(t.orderPayTitle=a.data[e].cart_num+" "+a.data[e].username,t.formData.pay_type=a.data[e].id)})},bindcartSubmit:function(){var t=this;t.isCartSubmit?t.$message.error("请勿重复提交"):""!=t.cartformData.cart_num?""!=t.cartformData.username?""!=t.cartformData.effective_year&&""!=t.cartformData.effective_mouth?(t.isCartSubmit=!0,t.$request.addCreditCardInfo(t.cartformData).then(function(a){1==a.code&&(t.creditcardList.push(a.data),t.isCartSubmit=!1,t.addCart=!1,t.cartformData.cart_num="",t.cartformData.username="",t.cartformData.effective_year="",t.cartformData.effective_mouth="")})):t.$message.error("有效期不能为空"):t.$message.error("户主不能为空"):t.$message.error("卡号不能为空")}}},s={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"repair_pay_true_container"},[i("div",{staticClass:"view_nav"},[i("div",{staticClass:"go_nav",on:{click:function(a){return t.goHome()}}},[t._v("Home")]),t._v(" "),i("div",[t._v(">")]),t._v(" "),i("div",{staticClass:"go_nav"},[t._v("All Goods")]),t._v(" "),i("div",[t._v(">")]),t._v(" "),i("div",[t._v("Information confirmation")])]),t._v(" "),i("div",{staticClass:"web_infocontainer ordeinfo_container"},[i("div",{staticClass:"web_orderinfo_trueinfo"},[i("div",{staticClass:"web_orderinfo_trueinfo_title"},[t._v(t._s(t.$t("pay.fill_info")))]),t._v(" "),i("div",{staticClass:"info"},[i("div",{staticClass:"info-item"},[i("div",{staticClass:"fl",staticStyle:{width:"calc(50% - 30px)"}},[i("div",{staticClass:"info-title"},[i("span",[t._v("送货地址")]),t._v(" "),i("span",{staticStyle:{color:"#00a0e9","font-size":"12px",cursor:"pointer","font-weight":"normal"},on:{click:t.bindChangeAddr}},[t._v("\n               更改\n             ")])]),t._v(" "),t.defaultAddress?i("div",{staticClass:"address"},[i("div",[t._v(t._s(t.defaultAddress.last_name)+" "+t._s(t.defaultAddress.first_name))]),t._v(" "),i("div",[t._v(t._s(t.defaultAddress.state)+" "+t._s(t.defaultAddress.city))]),t._v(" "),i("div",[t._v(t._s(t.defaultAddress.address))]),t._v(" "),i("div",[t._v("电话："+t._s(t.defaultAddress.mobile))])]):t._e()]),t._v(" "),i("div",{staticClass:"fr",staticStyle:{width:"50%"}},[i("div",{staticClass:"info-title"},[i("span",{staticStyle:{"font-weight":"bold"}},[t._v("付款方式")]),t._v(" "),i("span",{staticStyle:{color:"#00a0e9","font-size":"12px",cursor:"pointer","font-weight":"normal"},on:{click:t.bindChangePayType}},[t._v("更改")])]),t._v(" "),i("div",{staticStyle:{"font-size":"13px"}},["paypal"!=t.formData.pay_type?i("span",[t._v("信用卡：")]):t._e(),t._v(t._s(t.orderPayTitle)+"\n             ")])])]),t._v(" "),i("div",{staticClass:"info-item",staticStyle:{"min-height":"172px"}},t._l(t.goodsList,function(a,e){return t.goodsList?i("div",{key:e,staticClass:"webtrueorder_goods_item"},[i("div",{staticClass:"webtrueorder_goods_item_img"},[i("img",{staticClass:"el-image",attrs:{src:a.image_full,alt:""}})]),t._v(" "),i("div",{staticClass:"webtrueorder_goods_item_info"},[i("div",[t._v(t._s(a.title)+t._s(a.sku?" / "+a.sku.title:""))]),t._v(" "),i("div",{staticStyle:{color:"rgb(254, 78, 78)"}},[t._v("$"+t._s(a.sku?a.sku.price:a.price))]),t._v(" "),i("div",{staticStyle:{"font-size":"14px"}},[t._v("nums："+t._s(a.nums))])]),t._v(" "),i("div",{staticClass:"webtrueorder_goods_item_postalinfo"},[i("div",{staticStyle:{"font-size":"13px","margin-bottom":"10px","font-weight":"bold"}},[t._v("配送信息")]),t._v(" "),i("div",{staticClass:"webtrueorder_post_mode"},[a.sku?i("div",[a.sku.post_age>0?i("span",[t._v("配送费用$"+t._s(a.sku.post_age))]):i("span",[t._v("免费配送")])]):i("div",[a.post_age>0?i("span",[t._v("配送费用$"+t._s(a.post_age))]):i("span",[t._v("免费配送")])])])])]):t._e()}),0)]),t._v(" "),i("div",{staticClass:"webtrueorder_right"},[i("div",{staticStyle:{padding:"15px"}},[i("div",{staticStyle:{"margin-bottom":"20px"}},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.isSubmit,expression:"isSubmit"}],staticClass:"submit_btns",on:{click:t.bindSubmit}},[t._v(t._s(t.$t("config.submit_order")))])],1),t._v(" "),i("div",[t._v("订单概览：")]),t._v(" "),i("div",{staticStyle:{"margin-top":"5px"}},[i("div",{staticClass:"webtrueorder_right_priceitem"},[i("div",{staticClass:"webtrueorder_right_priceitem_lable fl"},[t._v("商品：")]),t._v(" "),i("div",{staticClass:"webtrueorder_right_priceitem_price fr"},[t._v("$"+t._s(t.totalGoodsPrice))])]),t._v(" "),i("div",{staticClass:"webtrueorder_right_priceitem"},[i("div",{staticClass:"webtrueorder_right_priceitem_lable fl"},[t._v("配送相关费用：")]),t._v(" "),i("div",{staticClass:"webtrueorder_right_priceitem_price fr"},[t._v("$"+t._s(t.totalPostAgePrice))])]),t._v(" "),i("div",{staticClass:"webtrueorder_right_priceitem"},[i("div",{staticClass:"webtrueorder_right_priceitem_lable fl"},[t._v("税款：")]),t._v(" "),i("div",{staticClass:"webtrueorder_right_priceitem_price fr"},[t._v("$"+t._s(t.totalTaxationPrice))])])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"0.5px",background:"#e5e5e5",margin:"15px auto"}}),t._v(" "),i("div",{staticStyle:{overflow:"hidden",color:"rgb(254, 78, 78)","font-weight":"bold"}},[i("div",{staticClass:"fl"},[t._v("订单总计：")]),t._v(" "),i("div",{staticClass:"fr"},[t._v("$"+t._s(t.totalOrderPrice))])])]),t._v(" "),i("div",{staticStyle:{"background-color":"#f7f7f7!important",padding:"15px"}},[i("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[t._v(t._s(t.$t("pay.remark"))+"：")]),t._v(" "),i("el-input",{attrs:{type:"textarea"},model:{value:t.formData.remark,callback:function(a){t.$set(t.formData,"remark",a)},expression:"formData.remark"}})],1)]),t._v(" "),i("div",{staticStyle:{clear:"both",height:"45px"}})])]),t._v(" "),t.dialogTableVisible&&"address"==t.dialogTableType?i("el-dialog",{attrs:{visible:t.dialogTableVisible,width:"800px",title:"Select addressee"},on:{"update:visible":function(a){t.dialogTableVisible=a}}},[i("div",{staticClass:"addr-ul"},[t.addressList&&t.addressList.length>0?i("div",[i("div",{staticStyle:{color:"#00a0e9",cursor:"pointer","text-align":"right","line-height":"30px"},on:{click:function(a){return t.addUserAddress()}}},[t._v("+Add")]),t._v(" "),t._l(t.addressList,function(a,e){return i("div",{key:e,staticClass:"addr-li",class:a.id==t.formData.c_addr_id?"active":"",on:{click:function(i){return t.bindCheckedAddr(a,e)}}},[i("div",{staticStyle:{"font-size":"16px"}},[t._v(t._s(a.state)+"  "+t._s(a.city)+"  "+t._s(a.address))]),t._v(" "),i("div",{staticStyle:{"font-size":"14px"}},[t._v("\n            "+t._s(a.last_name)+" "+t._s(a.first_name)+"\n            "),i("span",[t._v(t._s(a.mobile))])])])})],2):i("div",{staticStyle:{"padding-bottom":"45px",width:"max-content",margin:"auto","text-align":"center"}},[i("img",{staticStyle:{width:"150px"},attrs:{src:e("mAJy"),alt:""}}),t._v(" "),i("div",[t._v("You haven't added address information yet.\n          "),i("span",{staticStyle:{color:"#00a0e9",cursor:"pointer"},on:{click:function(a){return t.addUserAddress()}}},[t._v("\n            Add it now\n          ")])])])])]):t._e(),t._v(" "),t.dialogTableVisible&&"paytype"==t.dialogTableType?i("el-dialog",{attrs:{visible:t.dialogTableVisible,width:"800px",title:"Select Payment Type"},on:{"update:visible":function(a){t.dialogTableVisible=a}}},[i("div",{staticClass:"paycontent_container"},[i("h1",{staticClass:"maxtitle"},[t._v("请选择付款方式")]),t._v(" "),i("div",[t._v("带有银联标识的信用卡／借记卡会在提交订单后直接扣款")]),t._v(" "),i("div",{staticClass:"paycontent_container_item",staticStyle:{"margin-top":"20px","min-height":"150px"}},[i("div",{staticClass:"paycontent_container_item_title"},[t._v("支付选项")]),t._v(" "),t._l(t.creditcardList,function(a,e){return t.creditcardList.length>0?i("div",{key:e,staticStyle:{"padding-bottom":"15px"}},[i("el-radio",{attrs:{label:a.id},on:{change:t.selectPaypalType},model:{value:t.payType,callback:function(a){t.payType=a},expression:"payType"}},[t._v(t._s(a.cart_num)+" "+t._s(a.username))])],1):t._e()})],2),t._v(" "),i("div",{staticClass:"paycontent_container_item"},[i("div",{staticClass:"paycontent_container_item_title"},[t._v("添加信用卡")]),t._v(" "),i("div",{staticClass:"addCreditCard",on:{click:t.addCreditCardBtnFun}},[t._v("添加信用卡")])])])]):t._e(),t._v(" "),t.addCart?i("el-dialog",{attrs:{visible:t.addCart,width:"600px",title:"Add Credit Card"},on:{"update:visible":function(a){t.addCart=a}}},[i("div",{staticClass:"addcart_container"},[i("div",{staticClass:"addcart_container_item"},[i("span",[t._v("卡号：")]),t._v(" "),i("el-input",{attrs:{placeholder:""},model:{value:t.cartformData.cart_num,callback:function(a){t.$set(t.cartformData,"cart_num",a)},expression:"cartformData.cart_num"}})],1),t._v(" "),i("div",{staticClass:"addcart_container_item"},[i("span",[t._v("户主：")]),t._v(" "),i("el-input",{attrs:{placeholder:""},model:{value:t.cartformData.username,callback:function(a){t.$set(t.cartformData,"username",a)},expression:"cartformData.username"}})],1),t._v(" "),i("div",{staticClass:"addcart_container_item"},[i("span",[t._v("有效期：")]),t._v(" "),i("el-select",{staticStyle:{width:"70px"},attrs:{placeholder:""},model:{value:t.cartformData.effective_mouth,callback:function(a){t.$set(t.cartformData,"effective_mouth",a)},expression:"cartformData.effective_mouth"}},t._l(t.mouthList,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),i("el-select",{staticStyle:{"margin-left":"20px",width:"70px"},attrs:{"collapse-tags":"",placeholder:""},model:{value:t.cartformData.effective_year,callback:function(a){t.$set(t.cartformData,"effective_year",a)},expression:"cartformData.effective_year"}},t._l(t.yearList,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.isCartSubmit,expression:"isCartSubmit"}],staticClass:"addcartbtn",on:{click:t.bindcartSubmit}},[t._v("Submit")])],1)]):t._e()],1)},staticRenderFns:[]};var r=e("VU/8")(i,s,!1,function(t){e("4hk2")},"data-v-39b6d7c3",null);a.default=r.exports}});