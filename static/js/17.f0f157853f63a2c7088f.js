webpackJsonp([17],{II79:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("z2X1"),a=e.n(s),n={data:function(){return{lang:this.$i18n.locale,interval:4e3,repairProjectList:[],colorList:[],userinfo:[],detail:[],commonList:[],isShowDetail:!0,isShowComment:!1,isShowTerms:!1,totalPrice:0,price:0,id:"",saveInfo:{model_id:"",project_id:[],color_id:"",nums:1}}},created:function(){var t=this.$route.query;this.id=t.id,this.saveInfo.model_id=t.id,this.getDetailInfo(this.id),this.getColorList(),this.getReparModelComment(),this.userinfo=a.a.getItem("userinfo")},methods:{goHome:function(){this.$router.push("/")},goRepairList:function(){this.$router.go(-1)},getColorList:function(t){var i=this;i.$request.getRepairColor().then(function(t){1==t.code&&(i.colorList=t.data)})},getDetailInfo:function(t){var i=this;i.$request.getRepairInfo({id:t}).then(function(t){1==t.code&&(i.detail=t.data,i.getRepairProject(t.data.id))})},getRepairProject:function(t){var i=this;i.$request.getRepairList({model_id:t}).then(function(t){1==t.code&&(i.repairProjectList=t.data)})},getReparModelComment:function(){var t=this;t.$request.getRepairMsg({model_id:t.id}).then(function(i){1==i.code&&(t.commonList=i.data.list)})},selectProjectItem:function(t){var i=Number(this.totalPrice),e=Number(this.price),s=Number(this.detail.price),a=this.saveInfo.nums;if(e==s&&(e=0),this.saveInfo.project_id.indexOf(t.id)<0)this.saveInfo.project_id.push(t.id),e+=Number(t.price);else{for(var n in this.saveInfo.project_id)this.saveInfo.project_id[n]==t.id&&this.saveInfo.project_id.splice(n,1);e-=Number(t.price)}e<=0&&(e=this.detail.price),i=e*a,this.price=e,this.totalPrice=this.returnFloat(i)},selectColorItem:function(t){this.saveInfo.color_id=t.id},setNums:function(t){if(null==this.saveInfo.project_id||null==this.saveInfo.project_id||this.saveInfo.project_id.length<=0)return this.$message.error("Please select a repair item"),!1;var i=Number(this.price);"jian"==t?this.saveInfo.nums>1&&(this.saveInfo.nums=this.saveInfo.nums-1):this.saveInfo.nums=this.saveInfo.nums+1,i*=this.saveInfo.nums,this.totalPrice=i>0?this.returnFloat(i):0},switchTable:function(t){"1"==t?(this.isShowDetail=!0,this.isShowComment=!1,this.isShowTerms=!1):"2"==t?(this.isShowDetail=!1,this.isShowComment=!0,this.isShowTerms=!1):"3"==t&&(this.isShowDetail=!1,this.isShowComment=!1,this.isShowTerms=!0)},returnFloat:function(t){var i=(t=Math.round(100*parseFloat(t))/100).toString().split(".");return 1==i.length?t=t.toString()+".00":i.length>1?(i[1].length<2&&(t=t.toString()+"0"),t):void 0},saveRepairInfo:function(){var t=this;return!t.isCartSubmit&&(void 0==t.userinfo||null==t.userinfo||""==t.userinfo?(t.$message.error("Please login first"),!1):""==t.saveInfo.model_id?(t.$message.error("Failed to add cart"),!1):null==t.saveInfo.project_id||null==t.saveInfo.project_id||t.saveInfo.project_id.length<=0?(t.$message.error("Please select a service"),!1):null==t.saveInfo.color_id||null==t.saveInfo.color_id||""==t.saveInfo.color_id?(t.$message.error("Please select a device"),!1):t.saveInfo.nums<=0?(t.$message.error("Quantity cannot be empty"),!1):(t.isCartSubmit=!0,void t.$request.RepairCartSetAdd(t.saveInfo).then(function(i){t.isCartSubmit=!1,1==i.code&&t.$message.success(i.msg)})))}}},o={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"web_repairdetail_container"},[e("div",{staticClass:"view_nav"},[e("div",{staticClass:"go_nav",on:{click:function(i){return t.goHome()}}},[t._v("Home")]),t._v(" "),e("div",[t._v(">")]),t._v(" "),e("div",{staticClass:"go_nav",on:{click:function(i){return t.goRepairList()}}},[t._v("Maintenance center")]),t._v(" "),e("div",[t._v(">")]),t._v(" "),e("div",[t._v(t._s(t.detail.title))])]),t._v(" "),e("div",{staticClass:"web_repairdetail_baseinfo"},[e("div",{staticClass:"detail_left"},[e("el-carousel",{staticClass:"repaire_detail_carousel",attrs:{autoplay:"",interval:t.interval,height:"500px"}},t._l(t.detail.images_full,function(t,i){return e("el-carousel-item",{key:i,staticClass:"repaire_detail_carousel_item"},[e("img",{staticClass:"repaire_detail_carousel_img",attrs:{src:t,alt:""}})])}),1)],1),t._v(" "),e("div",{staticClass:"detail_right"},[e("div",{staticClass:"model_title"},[t._v(t._s(t.detail.title))]),t._v(" "),e("div",{staticClass:"detail_right_modeltitle"},[t._v(t._s("ch"==t.lang?"维修栏目":"Service")+"：")]),t._v(" "),e("div",{staticClass:"project_container"},t._l(t.repairProjectList,function(i,s){return e("div",{key:s,staticClass:"project_item",class:t.saveInfo.project_id.indexOf(i.id)>=0?"action_item":"",on:{click:function(e){return t.selectProjectItem(i)}}},[e("div",{staticClass:"title"},[t._v(t._s("ch"==t.lang?i.title_zh:i.title))]),t._v(" "),e("div",{staticStyle:{overflow:"hidden"}},[e("div",{staticClass:"price fl"},[t._v("$"+t._s(i.price))])])])}),0),t._v(" "),e("div",{staticClass:"detail_right_modeltitle"},[t._v(t._s("ch"==t.lang?"颜色":"Device")+"：")]),t._v(" "),e("div",{staticClass:"color_container"},t._l(t.colorList,function(i,s){return e("div",{key:s,staticClass:"color_item",class:t.saveInfo.color_id==i.id?"action_item":"",on:{click:function(e){return t.selectColorItem(i)}}},[t._v(t._s("ch"==t.lang?i.title_zh:i.title))])}),0),t._v(" "),e("div",{staticClass:"detail_right_modeltitle"},[t._v(t._s("ch"==t.lang?"数量":"Quantity")+"：")]),t._v(" "),e("div",{staticClass:"number_container"},[e("div",{staticClass:"fl num_jian",on:{click:function(i){return t.setNums("jian")}}},[e("i",{staticClass:"el-icon-minus"})]),t._v(" "),e("div",{staticClass:"fl nums"},[e("input",{attrs:{type:"text"},domProps:{value:t.saveInfo.nums}})]),t._v(" "),e("div",{staticClass:"fl num_jia",on:{click:function(i){return t.setNums("jia")}}},[e("i",{staticClass:"el-icon-plus"})])]),t._v(" "),e("div",{staticStyle:{overflow:"hidden",padding:"15px 0"}},[0!=t.totalPrice?e("div",{staticClass:"detail_right_modeltitle fl"},[t._v(t._s("ch"==t.lang?"总价":"Total price")+"：")]):t._e(),t._v(" "),0!=t.totalPrice?e("div",{staticClass:"payprice_container fl"},[e("span",{staticStyle:{"font-size":"20px"}},[t._v("$")]),t._v(" "),e("span",[t._v(t._s(t.totalPrice))])]):t._e()]),t._v(" "),e("div",{staticClass:"detail_btns"},[e("div",{staticClass:"btn fl",on:{click:function(i){return t.saveRepairInfo()}}},[t._v(t._s("ch"==t.lang?"加入购物车":"Add Cart"))])])])]),t._v(" "),e("div",{staticClass:"web_repairdetail_detailinfo"},[e("div",{staticClass:"web_repairdetail_menu"},[e("div",{staticClass:"menu_item fl",class:t.isShowDetail?"menu_item_action":"",on:{click:function(i){return t.switchTable("1")}}},[t._v("Details")]),t._v(" "),e("div",{staticClass:"menu_item fl",class:t.isShowTerms?"menu_item_action":"",on:{click:function(i){return t.switchTable("3")}}},[t._v("Terms and Conditions")])]),t._v(" "),t.isShowDetail?e("div",{staticClass:"web_repairdetail_detail"},[e("div",{domProps:{innerHTML:t._s(t.detail.explain)}}),t._v(" "),t.detail&&t.detail.instructions?e("div",[e("div",{staticClass:"main_title"},[t._v("Instructions：")]),t._v(" "),e("div",{domProps:{innerHTML:t._s("ch"==t.lang?t.detail.instructions.content_zh:t.detail.instructions.content)}})]):t._e(),t._v(" "),t.detail&&t.detail.warning?e("div",[e("div",{staticClass:"main_title"},[t._v("Warning：")]),t._v(" "),e("div",{domProps:{innerHTML:t._s("ch"==t.lang?t.detail.warning.content_zh:t.detail.warning.content)}})]):t._e()]):t._e(),t._v(" "),t.isShowTerms?e("div",{staticClass:"web_repairdetail_terms"},[e("div",{domProps:{innerHTML:t._s("ch"==t.lang?t.detail.terms.content_zh:t.detail.terms.content)}})]):t._e()]),t._v(" "),e("div",{staticStyle:{height:"45px"}})])},staticRenderFns:[]};var r=e("VU/8")(n,o,!1,function(t){e("sdMr")},"data-v-78751e25",null);i.default=r.exports},sdMr:function(t,i){}});